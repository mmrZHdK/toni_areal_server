"use strict";function getColor(t){var e;return e=0>=t?new tinycolor("black"):t>=255?new tinycolor("white"):new tinycolor({h:t,s:75,v:100})}var Backbone=require("backbone"),$=require("jquery"),_=require("underscore"),tinycolor=require("tinycolor"),template=require("../../../templates/Upload/Post/Text.hbs");Backbone.$=$,module.exports=Backbone.View.extend({events:{},initialize:function(){this.render()},render:function(){this.$el.append(template()),this.coloredInputs=this.$(".js-colorInput");var t=[{el:this.$(".js-noUiBackground"),name:"background",callback:this.setBackgroundColor,input:this.$(".js-colorBackgroundVal")},{el:this.$(".js-noUiText"),name:"text",callback:this.setTextColor,input:this.$(".js-colorTextVal")}];return $.each(t,_.bind(function(t,e){e.el.noUiSlider({start:[-1],step:1,range:{min:-1,max:256}}),e.ref=this.coloredInputs,e.el.on("slide",_.bind(this.blurInput,this)),e.el.on("slide",_.bind(e.callback,e)),e.el.on("change",_.bind(this.setInputValues,e))},this)),this.$(".js-slider").on("click",_.bind(this.blurInput,this)),this},blurInput:function(){this.$("input, textarea").blur()},setBackgroundColor:function(){var t=this.el.val(),e=getColor(t),i=e.toHexString();this.ref.css({background:i}),this.color=i,this.input.attr("value",i)},setTextColor:function(){var t=this.el.val(),e=getColor(t),i=e.toHexString();this.ref.css({color:i}),this.color=i,this.input.attr("value",i)},setInputValues:function(){this.input.attr("value",this.color)}});